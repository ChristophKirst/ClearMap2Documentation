
<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>VolumeVisual &#8212; ClearMap 2.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/clearmap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/clearmap_utils.css" />
    <link rel="stylesheet" type="text/css" href="../_static/clearmap_sidebar.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="https://platform.twitter.com/widgets.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/clearmap.js"></script>
    <script src="../_static/clearmap_sidebar.js"></script>
    <script src="../_static/clearmap_togglebutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="TurntableCamera" href="ClearMap.Visualization.Vispy.TurntableCamera.html" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <!--[if lt IE 9]>
  <script src="_static/css3-mediaqueries.js"></script>
  <![endif]-->

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'/>
   

  </head><body>
<div class="document">
 <div class="imagecontainer">
  <a href="../home.html"><img src="../_static/ClearMap_banner.jpg" height=150px width=150% border="0" alt="ClearMap"/></a>
  <div class="top-left">
    <p style="font-size: 30px"> 
       <a href="../home.html" style="color: #ffffff; font-weight: bold"> ClearMap Documentation </a>
    </p>
  </div>
  <div class="top-right">
    <ul class="link-list">
     <li class="link-list"><a href="../home.html">Home</a></li>
     <li class="link-list"><a href="../overview.html">Overview</a></li>    
     <li class="link-list"><a href="../installation.html">Installation</a></li>
     <li class="link-list"><a href="https://github.com/ChristophKirst/ClearMap2"> <img src="../_static/GitHub-Mark.png" height=16px alt="Github"/> Source</a>
    </ul>
  </div>
  <div class="bottom-right">
    <a href="https://twitter.com/clearmap_idisco?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @clearmap_idisco</a>
      <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>  </a>
  </div>
 </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ClearMap.Visualization.Vispy.TurntableCamera.html" title="TurntableCamera"
             accesskey="P">previous</a> |</li>
       <li><a href="../home.html">Home</a>|&nbsp;</li>
       <li><a href="../overview.html">Overview</a>|&nbsp;</li>      
       <li><a href="../search.html">Search</a>|&nbsp;</li>
       <li><a href="../index.html">Documentation </a> |&nbsp;</li>
       <li><a href="../index.html#clearmap-api">API </a> &raquo;</li>     

          <li class="nav-item nav-item-1"><a href="../api.html" >ClearMap</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="ClearMap.Visualization.html" >Visualization</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="ClearMap.Visualization.Vispy.html" accesskey="U">Vispy</a> &#187;</li> 
      </ul>
    </div>
<div class="document">
    
    <div class="documentwrapper">
    
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3><a href="../index.html">ClearMap</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functionality.html">Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wobblystitcher.html">WobblyStitcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cellmap.html">CellMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CellMap.html">CellMap Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tubemap.html">TubeMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TubeMap.html">TubeMap Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media.html">News and Media</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">ClearMap</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ClearMap.Alignment.html">Alignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.Analysis.html">Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.Compile.html">Compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.Environment.html">Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.External.html">External</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.IO.html">IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.ImageProcessing.html">ImageProcessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.ParallelProcessing.html">ParallelProcessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.Scripts.html">Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.Settings.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.Tests.html">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearMap.Utils.html">Utils</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="ClearMap.Visualization.html">Visualization</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ClearMap.Visualization.Color.html">Color</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClearMap.Visualization.Matplotlib.html">Matplotlib</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClearMap.Visualization.Mesh.html">Mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClearMap.Visualization.Plot3d.html">Plot3d</a></li>
<li class="toctree-l3"><a class="reference internal" href="ClearMap.Visualization.Qt.html">Qt</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="ClearMap.Visualization.Vispy.html">Vispy</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ClearMap.Visualization.Vispy.GraphVisual.html">GraphVisual</a></li>
<li class="toctree-l4"><a class="reference internal" href="ClearMap.Visualization.Vispy.Plot3d.html">Plot3d</a></li>
<li class="toctree-l4"><a class="reference internal" href="ClearMap.Visualization.Vispy.PlotGraph3d.html">PlotGraph3d</a></li>
<li class="toctree-l4"><a class="reference internal" href="ClearMap.Visualization.Vispy.TurntableCamera.html">TurntableCamera</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">VolumeVisual</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 

<h3>Questions? Suggestions?</h3>
<p>Open an issue at the
  <a href="https://github.com/ChristophKirst/ClearMap2/issues">tracker</a>.</p>
  

  <h4>Previous topic</h4>
  <p class="topless"><a href="ClearMap.Visualization.Vispy.TurntableCamera.html"
                        title="previous chapter">TurntableCamera</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Api/ClearMap.Visualization.Vispy.VolumeVisual.rst"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
    
    
    <div class="sphinxsidebar_right" role="navigation" aria-label="right navigation">
      <div class="sphinxsidebarwrapper_right">
        <h3> <a href="../cellmap.html">CellMap Pipeline</a></h3>
          <a href="../cellmap.html">
            <img src="../_static/CellMap_small_fast.gif" width=250px height=140px alt="CellMap"/></a>
        <h3> <a href="../tubemap.html">Tubemap Pipeline</a></h3>
          <a href="../tubemap.html">
            <img src="../_static/TubeMap_raw_movie_small.gif" width=250px height=140px alt="TubeMap"/></a>
        <h3> <a href="../media.html#gallery"> Gallery</a></h3>
          <a href="../media.html#gallery">
            <img src="../_static/TubeMap_graph_movie_small.gif" width=250px height=140px alt="Gallery"/></a> 
        <h3> <a href="../media.html#videos">Social Media and Videos</a></h3>
          <a href="../media.html#videos">   
            <img src="../_static/TEDx.png" width=250px height=70px alt="Videos"/></a>  
      </div>
    </div>
      <!-- sidebar2 --> 
    
    
    <div class="bodywrapper">       
    <div class="body" role="main">
          
  <div class="section" id="volumevisual">
<h1>VolumeVisual<a class="headerlink" href="#volumevisual" title="Permalink to this headline">¶</a></h1>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
</tbody>
</table>
<span class="target" id="module-ClearMap.Visualization.Vispy.VolumeVisual"></span><p>In Python, we define the six faces of a cuboid to draw, as well as
texture cooridnates corresponding with the vertices of the cuboid.
The back faces of the cuboid are drawn (and front faces are culled)
because only the back faces are visible when the camera is inside the
volume.</p>
<p>In the vertex shader, we intersect the view ray with the near and far
clipping planes. In the fragment shader, we use these two points to
compute the ray direction and then compute the position of the front
cuboid surface (or near clipping plane) along the view ray.</p>
<p>Next we calculate the number of steps to walk from the front surface
to the back surface and iterate over these positions in a for-loop.
At each iteration, the fragment color or other voxel information is
updated depending on the selected rendering method.</p>
<p>It is important for the texture interpolation is ‘linear’, since with
nearest the result look very ugly. The wrapping should be clamp_to_edge
to avoid artifacts when the ray takes a small step outside the volume.</p>
<p>The ray direction is established by mapping the vertex to the document
coordinate frame, adjusting z to +/-1, and mapping the coordinate back.
The ray is expressed in coordinates local to the volume (i.e. texture
coordinates).</p>
<dl class="class">
<dt id="ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual">
<em class="property">class </em><code class="sig-name descname">VolumeVisual</code><span class="sig-paren">(</span><em class="sig-param">vol</em>, <em class="sig-param">clim=None</em>, <em class="sig-param">method='mip'</em>, <em class="sig-param">threshold=None</em>, <em class="sig-param">relative_step_size=0.8</em>, <em class="sig-param">cmap='grays'</em>, <em class="sig-param">emulate_texture=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ClearMap/Visualization/Vispy/VolumeVisual.html#VolumeVisual"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">vispy.visuals.visual.Visual</span></code></p>
<p>Displays a 3D Volume</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vol</strong> (<em>ndarray</em>) – The volume to display. Must be ndim==3.</p></li>
<li><p><strong>clim</strong> (<em>tuple of two floats | None</em>) – The contrast limits. The values in the volume are mapped to
black and white corresponding to these values. Default maps
between min and max.</p></li>
<li><p><strong>method</strong> (<em>{'mip'</em><em>, </em><em>'translucent'</em><em>, </em><em>'additive'</em><em>, </em><em>'iso'}</em>) – The render method to use. See corresponding docs for details.
Default ‘mip’.</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – The threshold to use for the isosurface render method. By default
the mean of the given volume is used.</p></li>
<li><p><strong>relative_step_size</strong> (<em>float</em>) – The relative step size to step through the volume. Default 0.8.
Increase to e.g. 1.5 to increase performance, at the cost of
quality.</p></li>
<li><p><strong>cmap</strong> (<em>str</em>) – Colormap to use.</p></li>
<li><p><strong>emulate_texture</strong> (<em>bool</em>) – Use 2D textures to emulate a 3D texture. OpenGL ES 2.0 compatible,
but has lower performance on desktop platforms.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.set_data">
<code class="sig-name descname">set_data</code><span class="sig-paren">(</span><em class="sig-param">vol</em>, <em class="sig-param">clim=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ClearMap/Visualization/Vispy/VolumeVisual.html#VolumeVisual.set_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.set_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the volume data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vol</strong> (<em>ndarray</em>) – The 3D volume.</p></li>
<li><p><strong>clim</strong> (<em>tuple | None</em>) – Colormap limits to use. None will use the min and max values.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.clim">
<em class="property">property </em><code class="sig-name descname">clim</code><a class="headerlink" href="#ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.clim" title="Permalink to this definition">¶</a></dt>
<dd><p>The contrast limits that were applied to the volume data.
Settable via set_data().</p>
</dd></dl>

<dl class="method">
<dt id="ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.cmap">
<em class="property">property </em><code class="sig-name descname">cmap</code><a class="headerlink" href="#ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.cmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.method">
<em class="property">property </em><code class="sig-name descname">method</code><a class="headerlink" href="#ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.method" title="Permalink to this definition">¶</a></dt>
<dd><p>The render method to use</p>
<p>Current options are:</p>
<blockquote>
<div><ul class="simple">
<li><p>translucent: voxel colors are blended along the view ray until
the result is opaque.</p></li>
<li><p>mip: maxiumum intensity projection. Cast a ray and display the
maximum value that was encountered.</p></li>
<li><p>additive: voxel colors are added along the view ray until
the result is saturated.</p></li>
<li><p>iso: isosurface. Cast a ray until a certain threshold is
encountered. At that location, lighning calculations are
performed to give the visual appearance of a surface.</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.relative_step_size">
<em class="property">property </em><code class="sig-name descname">relative_step_size</code><a class="headerlink" href="#ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.relative_step_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The relative step size used during raycasting.</p>
<p>Larger values yield higher performance at reduced quality. If
set &gt; 2.0 the ray skips entire voxels. Recommended values are
between 0.5 and 1.5. The amount of quality degredation depends
on the render method.</p>
</dd></dl>

<dl class="method">
<dt id="ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.threshold">
<em class="property">property </em><code class="sig-name descname">threshold</code><a class="headerlink" href="#ClearMap.Visualization.Vispy.VolumeVisual.VolumeVisual.threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>The threshold value to apply for the isosurface render method.</p>
</dd></dl>

</dd></dl>

</div>

 <!-- body -->
    </div> <!-- body -->
    </div> <!-- bodywrapper -->
    

     
  <!-- mainrow --></div>
<!-- document --></div>
<div class="document" style="background-color: #ffffff; text-align: left; padding: 5px 0px 5px 0px">
<p align="center">
<a href="../overview.html"><img src="../_static/ClearMap_banner.jpg" height=150px width=150% border="0" alt="ClearMap"/></a>
</p>
</div>

    <div class="footer" role="contentinfo">
        &#169; Copyright Copyright © 2020 by Christoph Kirst.
    </div>
  </body>
</html>